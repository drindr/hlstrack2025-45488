// ==============================================================
// Generated by Vitis HLS v2024.2
// Copyright 1986-2022 Xilinx, Inc. All Rights Reserved.
// Copyright 2022-2024 Advanced Micro Devices, Inc. All Rights Reserved.
// ==============================================================

`timescale 1 ns / 1 ps 

module test_hmac_sha256_kpad_32_64_256_32_64_sha256_wrapper_Pipeline_VITIS_LOOP_120_2 (
        ap_clk,
        ap_rst,
        ap_start,
        ap_done,
        ap_idle,
        ap_ready,
        keyStrm_dout,
        keyStrm_empty_n,
        keyStrm_read,
        k1_out,
        k1_out_ap_vld
);

parameter    ap_ST_fsm_pp0_stage0 = 1'd1;

input   ap_clk;
input   ap_rst;
input   ap_start;
output   ap_done;
output   ap_idle;
output   ap_ready;
input  [31:0] keyStrm_dout;
input   keyStrm_empty_n;
output   keyStrm_read;
output  [511:0] k1_out;
output   k1_out_ap_vld;

reg ap_idle;
reg keyStrm_read;
reg k1_out_ap_vld;

(* fsm_encoding = "none" *) reg   [0:0] ap_CS_fsm;
wire    ap_CS_fsm_pp0_stage0;
wire    ap_enable_reg_pp0_iter0;
reg    ap_enable_reg_pp0_iter1;
reg    ap_idle_pp0;
reg    ap_block_pp0_stage0_subdone;
wire   [0:0] icmp_ln120_fu_80_p2;
reg    ap_condition_exit_pp0_iter0_stage0;
wire    ap_loop_exit_ready;
reg    ap_ready_int;
reg    keyStrm_blk_n;
wire    ap_block_pp0_stage0_grp1;
reg   [511:0] k1_fu_46;
wire   [511:0] k1_1_fu_114_p5;
reg    ap_block_pp0_stage0_11001_grp1;
wire    ap_loop_init;
reg   [3:0] i_02_fu_50;
wire   [3:0] i_8_fu_86_p2;
reg    ap_block_pp0_stage0_11001;
reg   [3:0] ap_sig_allocacmp_i;
wire    ap_block_pp0_stage0;
reg    ap_block_pp0_stage0_01001_grp1;
wire   [223:0] tmp_s_fu_100_p4;
wire   [223:0] trunc_ln124_fu_110_p1;
reg    ap_done_reg;
wire    ap_continue_int;
reg    ap_done_int;
reg   [0:0] ap_NS_fsm;
wire    ap_enable_pp0;
wire    ap_start_int;
wire    ap_ready_sig;
wire    ap_done_sig;
wire    ap_ce_reg;

// power-on initialization
initial begin
#0 ap_CS_fsm = 1'd1;
#0 ap_enable_reg_pp0_iter1 = 1'b0;
#0 k1_fu_46 = 512'd0;
#0 i_02_fu_50 = 4'd0;
#0 ap_done_reg = 1'b0;
end

test_hmac_sha256_flow_control_loop_pipe_sequential_init flow_control_loop_pipe_sequential_init_U(
    .ap_clk(ap_clk),
    .ap_rst(ap_rst),
    .ap_start(ap_start),
    .ap_ready(ap_ready_sig),
    .ap_done(ap_done_sig),
    .ap_start_int(ap_start_int),
    .ap_loop_init(ap_loop_init),
    .ap_ready_int(ap_ready_int),
    .ap_loop_exit_ready(ap_condition_exit_pp0_iter0_stage0),
    .ap_loop_exit_done(ap_done_int),
    .ap_continue_int(ap_continue_int),
    .ap_done_int(ap_done_int)
);

always @ (posedge ap_clk) begin
    if (ap_rst == 1'b1) begin
        ap_CS_fsm <= ap_ST_fsm_pp0_stage0;
    end else begin
        ap_CS_fsm <= ap_NS_fsm;
    end
end

always @ (posedge ap_clk) begin
    if (ap_rst == 1'b1) begin
        ap_done_reg <= 1'b0;
    end else begin
        if ((ap_continue_int == 1'b1)) begin
            ap_done_reg <= 1'b0;
        end else if (((ap_loop_exit_ready == 1'b1) & (1'b0 == ap_block_pp0_stage0_subdone) & (1'b1 == ap_CS_fsm_pp0_stage0))) begin
            ap_done_reg <= 1'b1;
        end
    end
end

always @ (posedge ap_clk) begin
    if (ap_rst == 1'b1) begin
        ap_enable_reg_pp0_iter1 <= 1'b0;
    end else begin
        if ((1'b1 == ap_condition_exit_pp0_iter0_stage0)) begin
            ap_enable_reg_pp0_iter1 <= 1'b0;
        end else if (((1'b0 == ap_block_pp0_stage0_subdone) & (1'b1 == ap_CS_fsm_pp0_stage0))) begin
            ap_enable_reg_pp0_iter1 <= ap_start_int;
        end
    end
end

always @ (posedge ap_clk) begin
    if (((1'b0 == ap_block_pp0_stage0_11001) & (1'b1 == ap_CS_fsm_pp0_stage0))) begin
        if (((icmp_ln120_fu_80_p2 == 1'd0) & (ap_enable_reg_pp0_iter0 == 1'b1))) begin
            i_02_fu_50 <= i_8_fu_86_p2;
        end else if ((ap_loop_init == 1'b1)) begin
            i_02_fu_50 <= 4'd0;
        end
    end
end

always @ (posedge ap_clk) begin
    if (((1'b0 == ap_block_pp0_stage0_11001_grp1) & (1'b1 == ap_CS_fsm_pp0_stage0))) begin
        if ((ap_loop_init == 1'b1)) begin
                        k1_fu_46[256] <= 1'b0;
            k1_fu_46[257] <= 1'b0;
            k1_fu_46[258] <= 1'b0;
            k1_fu_46[259] <= 1'b0;
            k1_fu_46[260] <= 1'b0;
            k1_fu_46[261] <= 1'b0;
            k1_fu_46[262] <= 1'b0;
            k1_fu_46[263] <= 1'b0;
            k1_fu_46[264] <= 1'b0;
            k1_fu_46[265] <= 1'b0;
            k1_fu_46[266] <= 1'b0;
            k1_fu_46[267] <= 1'b0;
            k1_fu_46[268] <= 1'b0;
            k1_fu_46[269] <= 1'b0;
            k1_fu_46[270] <= 1'b0;
            k1_fu_46[271] <= 1'b0;
            k1_fu_46[272] <= 1'b0;
            k1_fu_46[273] <= 1'b0;
            k1_fu_46[274] <= 1'b0;
            k1_fu_46[275] <= 1'b0;
            k1_fu_46[276] <= 1'b0;
            k1_fu_46[277] <= 1'b0;
            k1_fu_46[278] <= 1'b0;
            k1_fu_46[279] <= 1'b0;
            k1_fu_46[280] <= 1'b0;
            k1_fu_46[281] <= 1'b0;
            k1_fu_46[282] <= 1'b0;
            k1_fu_46[283] <= 1'b0;
            k1_fu_46[284] <= 1'b0;
            k1_fu_46[285] <= 1'b0;
            k1_fu_46[286] <= 1'b0;
            k1_fu_46[287] <= 1'b0;
            k1_fu_46[288] <= 1'b0;
            k1_fu_46[289] <= 1'b0;
            k1_fu_46[290] <= 1'b0;
            k1_fu_46[291] <= 1'b0;
            k1_fu_46[292] <= 1'b0;
            k1_fu_46[293] <= 1'b0;
            k1_fu_46[294] <= 1'b0;
            k1_fu_46[295] <= 1'b0;
            k1_fu_46[296] <= 1'b0;
            k1_fu_46[297] <= 1'b0;
            k1_fu_46[298] <= 1'b0;
            k1_fu_46[299] <= 1'b0;
            k1_fu_46[300] <= 1'b0;
            k1_fu_46[301] <= 1'b0;
            k1_fu_46[302] <= 1'b0;
            k1_fu_46[303] <= 1'b0;
            k1_fu_46[304] <= 1'b0;
            k1_fu_46[305] <= 1'b0;
            k1_fu_46[306] <= 1'b0;
            k1_fu_46[307] <= 1'b0;
            k1_fu_46[308] <= 1'b0;
            k1_fu_46[309] <= 1'b0;
            k1_fu_46[310] <= 1'b0;
            k1_fu_46[311] <= 1'b0;
            k1_fu_46[312] <= 1'b0;
            k1_fu_46[313] <= 1'b0;
            k1_fu_46[314] <= 1'b0;
            k1_fu_46[315] <= 1'b0;
            k1_fu_46[316] <= 1'b0;
            k1_fu_46[317] <= 1'b0;
            k1_fu_46[318] <= 1'b0;
            k1_fu_46[319] <= 1'b0;
            k1_fu_46[320] <= 1'b0;
            k1_fu_46[321] <= 1'b0;
            k1_fu_46[322] <= 1'b0;
            k1_fu_46[323] <= 1'b0;
            k1_fu_46[324] <= 1'b0;
            k1_fu_46[325] <= 1'b0;
            k1_fu_46[326] <= 1'b0;
            k1_fu_46[327] <= 1'b0;
            k1_fu_46[328] <= 1'b0;
            k1_fu_46[329] <= 1'b0;
            k1_fu_46[330] <= 1'b0;
            k1_fu_46[331] <= 1'b0;
            k1_fu_46[332] <= 1'b0;
            k1_fu_46[333] <= 1'b0;
            k1_fu_46[334] <= 1'b0;
            k1_fu_46[335] <= 1'b0;
            k1_fu_46[336] <= 1'b0;
            k1_fu_46[337] <= 1'b0;
            k1_fu_46[338] <= 1'b0;
            k1_fu_46[339] <= 1'b0;
            k1_fu_46[340] <= 1'b0;
            k1_fu_46[341] <= 1'b0;
            k1_fu_46[342] <= 1'b0;
            k1_fu_46[343] <= 1'b0;
            k1_fu_46[344] <= 1'b0;
            k1_fu_46[345] <= 1'b0;
            k1_fu_46[346] <= 1'b0;
            k1_fu_46[347] <= 1'b0;
            k1_fu_46[348] <= 1'b0;
            k1_fu_46[349] <= 1'b0;
            k1_fu_46[350] <= 1'b0;
            k1_fu_46[351] <= 1'b0;
            k1_fu_46[352] <= 1'b0;
            k1_fu_46[353] <= 1'b0;
            k1_fu_46[354] <= 1'b0;
            k1_fu_46[355] <= 1'b0;
            k1_fu_46[356] <= 1'b0;
            k1_fu_46[357] <= 1'b0;
            k1_fu_46[358] <= 1'b0;
            k1_fu_46[359] <= 1'b0;
            k1_fu_46[360] <= 1'b0;
            k1_fu_46[361] <= 1'b0;
            k1_fu_46[362] <= 1'b0;
            k1_fu_46[363] <= 1'b0;
            k1_fu_46[364] <= 1'b0;
            k1_fu_46[365] <= 1'b0;
            k1_fu_46[366] <= 1'b0;
            k1_fu_46[367] <= 1'b0;
            k1_fu_46[368] <= 1'b0;
            k1_fu_46[369] <= 1'b0;
            k1_fu_46[370] <= 1'b0;
            k1_fu_46[371] <= 1'b0;
            k1_fu_46[372] <= 1'b0;
            k1_fu_46[373] <= 1'b0;
            k1_fu_46[374] <= 1'b0;
            k1_fu_46[375] <= 1'b0;
            k1_fu_46[376] <= 1'b0;
            k1_fu_46[377] <= 1'b0;
            k1_fu_46[378] <= 1'b0;
            k1_fu_46[379] <= 1'b0;
            k1_fu_46[380] <= 1'b0;
            k1_fu_46[381] <= 1'b0;
            k1_fu_46[382] <= 1'b0;
            k1_fu_46[383] <= 1'b0;
            k1_fu_46[384] <= 1'b0;
            k1_fu_46[385] <= 1'b0;
            k1_fu_46[386] <= 1'b0;
            k1_fu_46[387] <= 1'b0;
            k1_fu_46[388] <= 1'b0;
            k1_fu_46[389] <= 1'b0;
            k1_fu_46[390] <= 1'b0;
            k1_fu_46[391] <= 1'b0;
            k1_fu_46[392] <= 1'b0;
            k1_fu_46[393] <= 1'b0;
            k1_fu_46[394] <= 1'b0;
            k1_fu_46[395] <= 1'b0;
            k1_fu_46[396] <= 1'b0;
            k1_fu_46[397] <= 1'b0;
            k1_fu_46[398] <= 1'b0;
            k1_fu_46[399] <= 1'b0;
            k1_fu_46[400] <= 1'b0;
            k1_fu_46[401] <= 1'b0;
            k1_fu_46[402] <= 1'b0;
            k1_fu_46[403] <= 1'b0;
            k1_fu_46[404] <= 1'b0;
            k1_fu_46[405] <= 1'b0;
            k1_fu_46[406] <= 1'b0;
            k1_fu_46[407] <= 1'b0;
            k1_fu_46[408] <= 1'b0;
            k1_fu_46[409] <= 1'b0;
            k1_fu_46[410] <= 1'b0;
            k1_fu_46[411] <= 1'b0;
            k1_fu_46[412] <= 1'b0;
            k1_fu_46[413] <= 1'b0;
            k1_fu_46[414] <= 1'b0;
            k1_fu_46[415] <= 1'b0;
            k1_fu_46[416] <= 1'b0;
            k1_fu_46[417] <= 1'b0;
            k1_fu_46[418] <= 1'b0;
            k1_fu_46[419] <= 1'b0;
            k1_fu_46[420] <= 1'b0;
            k1_fu_46[421] <= 1'b0;
            k1_fu_46[422] <= 1'b0;
            k1_fu_46[423] <= 1'b0;
            k1_fu_46[424] <= 1'b0;
            k1_fu_46[425] <= 1'b0;
            k1_fu_46[426] <= 1'b0;
            k1_fu_46[427] <= 1'b0;
            k1_fu_46[428] <= 1'b0;
            k1_fu_46[429] <= 1'b0;
            k1_fu_46[430] <= 1'b0;
            k1_fu_46[431] <= 1'b0;
            k1_fu_46[432] <= 1'b0;
            k1_fu_46[433] <= 1'b0;
            k1_fu_46[434] <= 1'b0;
            k1_fu_46[435] <= 1'b0;
            k1_fu_46[436] <= 1'b0;
            k1_fu_46[437] <= 1'b0;
            k1_fu_46[438] <= 1'b0;
            k1_fu_46[439] <= 1'b0;
            k1_fu_46[440] <= 1'b0;
            k1_fu_46[441] <= 1'b0;
            k1_fu_46[442] <= 1'b0;
            k1_fu_46[443] <= 1'b0;
            k1_fu_46[444] <= 1'b0;
            k1_fu_46[445] <= 1'b0;
            k1_fu_46[446] <= 1'b0;
            k1_fu_46[447] <= 1'b0;
            k1_fu_46[448] <= 1'b0;
            k1_fu_46[449] <= 1'b0;
            k1_fu_46[450] <= 1'b0;
            k1_fu_46[451] <= 1'b0;
            k1_fu_46[452] <= 1'b0;
            k1_fu_46[453] <= 1'b0;
            k1_fu_46[454] <= 1'b0;
            k1_fu_46[455] <= 1'b0;
            k1_fu_46[456] <= 1'b0;
            k1_fu_46[457] <= 1'b0;
            k1_fu_46[458] <= 1'b0;
            k1_fu_46[459] <= 1'b0;
            k1_fu_46[460] <= 1'b0;
            k1_fu_46[461] <= 1'b0;
            k1_fu_46[462] <= 1'b0;
            k1_fu_46[463] <= 1'b0;
            k1_fu_46[464] <= 1'b0;
            k1_fu_46[465] <= 1'b0;
            k1_fu_46[466] <= 1'b0;
            k1_fu_46[467] <= 1'b0;
            k1_fu_46[468] <= 1'b0;
            k1_fu_46[469] <= 1'b0;
            k1_fu_46[470] <= 1'b0;
            k1_fu_46[471] <= 1'b0;
            k1_fu_46[472] <= 1'b0;
            k1_fu_46[473] <= 1'b0;
            k1_fu_46[474] <= 1'b0;
            k1_fu_46[475] <= 1'b0;
            k1_fu_46[476] <= 1'b0;
            k1_fu_46[477] <= 1'b0;
            k1_fu_46[478] <= 1'b0;
            k1_fu_46[479] <= 1'b0;
            k1_fu_46[480] <= 1'b0;
            k1_fu_46[481] <= 1'b0;
            k1_fu_46[482] <= 1'b0;
            k1_fu_46[483] <= 1'b0;
            k1_fu_46[484] <= 1'b0;
            k1_fu_46[485] <= 1'b0;
            k1_fu_46[486] <= 1'b0;
            k1_fu_46[487] <= 1'b0;
            k1_fu_46[488] <= 1'b0;
            k1_fu_46[489] <= 1'b0;
            k1_fu_46[490] <= 1'b0;
            k1_fu_46[491] <= 1'b0;
            k1_fu_46[492] <= 1'b0;
            k1_fu_46[493] <= 1'b0;
            k1_fu_46[494] <= 1'b0;
            k1_fu_46[495] <= 1'b0;
            k1_fu_46[496] <= 1'b0;
            k1_fu_46[497] <= 1'b0;
            k1_fu_46[498] <= 1'b0;
            k1_fu_46[499] <= 1'b0;
            k1_fu_46[500] <= 1'b0;
            k1_fu_46[501] <= 1'b0;
            k1_fu_46[502] <= 1'b0;
            k1_fu_46[503] <= 1'b0;
            k1_fu_46[504] <= 1'b0;
            k1_fu_46[505] <= 1'b0;
            k1_fu_46[506] <= 1'b0;
            k1_fu_46[507] <= 1'b0;
            k1_fu_46[508] <= 1'b0;
            k1_fu_46[509] <= 1'b0;
            k1_fu_46[510] <= 1'b0;
            k1_fu_46[511] <= 1'b0;
        end else if ((ap_enable_reg_pp0_iter1 == 1'b1)) begin
                        k1_fu_46[511 : 256] <= k1_1_fu_114_p5[511 : 256];
        end
    end
end

always @ (*) begin
    if (((icmp_ln120_fu_80_p2 == 1'd1) & (1'b0 == ap_block_pp0_stage0_subdone) & (ap_enable_reg_pp0_iter0 == 1'b1) & (1'b1 == ap_CS_fsm_pp0_stage0))) begin
        ap_condition_exit_pp0_iter0_stage0 = 1'b1;
    end else begin
        ap_condition_exit_pp0_iter0_stage0 = 1'b0;
    end
end

always @ (*) begin
    if (((ap_loop_exit_ready == 1'b1) & (1'b0 == ap_block_pp0_stage0_subdone) & (1'b1 == ap_CS_fsm_pp0_stage0))) begin
        ap_done_int = 1'b1;
    end else begin
        ap_done_int = ap_done_reg;
    end
end

always @ (*) begin
    if (((ap_idle_pp0 == 1'b1) & (1'b1 == ap_CS_fsm_pp0_stage0) & (ap_start_int == 1'b0))) begin
        ap_idle = 1'b1;
    end else begin
        ap_idle = 1'b0;
    end
end

always @ (*) begin
    if (((ap_enable_reg_pp0_iter1 == 1'b0) & (ap_enable_reg_pp0_iter0 == 1'b0))) begin
        ap_idle_pp0 = 1'b1;
    end else begin
        ap_idle_pp0 = 1'b0;
    end
end

always @ (*) begin
    if (((1'b0 == ap_block_pp0_stage0_subdone) & (ap_enable_reg_pp0_iter0 == 1'b1) & (1'b1 == ap_CS_fsm_pp0_stage0))) begin
        ap_ready_int = 1'b1;
    end else begin
        ap_ready_int = 1'b0;
    end
end

always @ (*) begin
    if (((ap_loop_init == 1'b1) & (1'b0 == ap_block_pp0_stage0) & (1'b1 == ap_CS_fsm_pp0_stage0))) begin
        ap_sig_allocacmp_i = 4'd0;
    end else begin
        ap_sig_allocacmp_i = i_02_fu_50;
    end
end

always @ (*) begin
    if (((ap_loop_exit_ready == 1'b1) & (icmp_ln120_fu_80_p2 == 1'd1) & (1'b0 == ap_block_pp0_stage0_11001_grp1) & (1'b1 == ap_CS_fsm_pp0_stage0))) begin
        k1_out_ap_vld = 1'b1;
    end else begin
        k1_out_ap_vld = 1'b0;
    end
end

always @ (*) begin
    if (((1'b0 == ap_block_pp0_stage0_grp1) & (ap_enable_reg_pp0_iter1 == 1'b1) & (1'b1 == ap_CS_fsm_pp0_stage0))) begin
        keyStrm_blk_n = keyStrm_empty_n;
    end else begin
        keyStrm_blk_n = 1'b1;
    end
end

always @ (*) begin
    if (((1'b0 == ap_block_pp0_stage0_11001_grp1) & (ap_enable_reg_pp0_iter1 == 1'b1) & (1'b1 == ap_CS_fsm_pp0_stage0))) begin
        keyStrm_read = 1'b1;
    end else begin
        keyStrm_read = 1'b0;
    end
end

always @ (*) begin
    case (ap_CS_fsm)
        ap_ST_fsm_pp0_stage0 : begin
            ap_NS_fsm = ap_ST_fsm_pp0_stage0;
        end
        default : begin
            ap_NS_fsm = 'bx;
        end
    endcase
end

assign ap_CS_fsm_pp0_stage0 = ap_CS_fsm[32'd0];

assign ap_block_pp0_stage0 = ~(1'b1 == 1'b1);

always @ (*) begin
    ap_block_pp0_stage0_01001_grp1 = ((keyStrm_empty_n == 1'b0) & (ap_enable_reg_pp0_iter1 == 1'b1));
end

always @ (*) begin
    ap_block_pp0_stage0_11001 = ((keyStrm_empty_n == 1'b0) & (ap_enable_reg_pp0_iter1 == 1'b1));
end

always @ (*) begin
    ap_block_pp0_stage0_11001_grp1 = ((keyStrm_empty_n == 1'b0) & (ap_enable_reg_pp0_iter1 == 1'b1));
end

assign ap_block_pp0_stage0_grp1 = ~(1'b1 == 1'b1);

always @ (*) begin
    ap_block_pp0_stage0_subdone = ((keyStrm_empty_n == 1'b0) & (ap_enable_reg_pp0_iter1 == 1'b1));
end

assign ap_done = ap_done_sig;

assign ap_enable_pp0 = (ap_idle_pp0 ^ 1'b1);

assign ap_enable_reg_pp0_iter0 = ap_start_int;

assign ap_loop_exit_ready = ap_condition_exit_pp0_iter0_stage0;

assign ap_ready = ap_ready_sig;

assign i_8_fu_86_p2 = (ap_sig_allocacmp_i + 4'd1);

assign icmp_ln120_fu_80_p2 = ((ap_sig_allocacmp_i == 4'd8) ? 1'b1 : 1'b0);

assign k1_1_fu_114_p5 = {{{{tmp_s_fu_100_p4}, {keyStrm_dout}}, {trunc_ln124_fu_110_p1}}, {32'd0}};

assign k1_out = k1_fu_46;

assign tmp_s_fu_100_p4 = {{k1_fu_46[479:256]}};

assign trunc_ln124_fu_110_p1 = k1_fu_46[223:0];

always @ (posedge ap_clk) begin
    k1_fu_46[255:0] <= 256'b0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000;
end

endmodule //test_hmac_sha256_kpad_32_64_256_32_64_sha256_wrapper_Pipeline_VITIS_LOOP_120_2
